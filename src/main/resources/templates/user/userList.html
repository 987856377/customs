<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
>
<head>
    <title>后台管理页面</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" th:href="@{/font-awesome-4.7.0/css/font-awesome.min.css}" type="text/css"/>
    <link rel="stylesheet" th:href="@{/bootstrap/bootstrap.min.css}" type="text/css"/>
    <link rel="stylesheet" th:href="@{/bootstrap-table/bootstrap-table.min.css}" type="text/css"/>
    <link rel="stylesheet" th:href="@{/css/main.css}" type="text/css"/>
</head>
<body  class="app sidebar-mini rtl">
    <!-- Navbar-->
    <header class="app-header"><a class="app-header__logo" href="/user/index"><i class="app-menu__icon fa fa-desktop"></i> 后台管理</a>
        <!-- Sidebar toggle button--><a class="app-sidebar__toggle" href="#" data-toggle="sidebar" aria-label="Hide Sidebar"></a>
        <!-- Navbar Right Menu-->
        <ul class="app-nav">
            <li class="app-search">
                <input class="app-search__input" type="search" placeholder="Search">
                <button class="app-search__button"><i class="fa fa-search"></i></button>
            </li>
            <!-- User Menu-->
            <li class="dropdown"><a class="app-nav__item" href="#" data-toggle="dropdown" aria-label="Open Profile Menu"><i class="fa fa-user fa-lg"></i></a>
                <ul class="dropdown-menu settings-menu dropdown-menu-right">
                    <li><a class="dropdown-item" href="/index"><i class="fa fa-home fa-lg"></i> 主页</a></li>
                    <li><a class="dropdown-item" href="/logout"><i class="fa fa-sign-out fa-lg"></i> 退出</a></li>
                </ul>
            </li>
        </ul>
    </header>

    <!-- Sidebar menu-->
    <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
    <aside class="app-sidebar">
        <div class="app-sidebar__user" sec:authorize="isAuthenticated()">
            <div>
                <i class="app-menu__icon fa fa-user-circle-o fa-lg"></i><span  id="operator" class="app-sidebar__user-name" sec:authentication="name"></span>
            </div>
        </div>
        <ul class="app-menu">
            <li><a class="app-menu__item" href="/user/index"><i class="app-menu__icon fa fa-home"></i><span class="app-menu__label">主页</span></a></li>
            <li class="treeview is-expanded">><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon fa fa-user"></i><span class="app-menu__label">人员管理</span><i class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/user/resetPassword">重置密码</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/user/userFind">用户检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/user/resetPassword">重置密码</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/user/userFind">用户检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item active" href="/dba/userList">所有用户</a></li>
                </ul>
            </li>
            <li class="treeview">><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon fa fa-info"></i><span class="app-menu__label">公告管理</span><i class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/announce/announcePublish">发布公告</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/announce/announceFind">公告检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/announce/announceList">所有公告</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/announce/announcePublish">发布公告</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/announce/announceFind">公告检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/announce/announceList">所有公告</a></li>
                </ul>
            </li>
            <li class="treeview">><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon fa fa-rss"></i><span class="app-menu__label">新闻管理</span><i class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/news/newsPublish">发布新闻</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/news/newsFind">新闻检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/news/newsList">所有新闻</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/news/newsPublish">发布新闻</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/news/newsFind">新闻检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/news/newsList">所有新闻</a></li>
                </ul>
            </li>
            <li class="treeview">><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon fa fa-commenting"></i><span class="app-menu__label">留言管理</span><i class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/topic/topicFind">留言检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/topic/topicList">所有留言</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/topic/topicFind">留言检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/topic/topicList">所有留言</a></li>
                </ul>
            </li>
            <li class="treeview">><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon fa fa-comments-o"></i><span class="app-menu__label">回复管理</span><i class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/reply/replyFind">回复检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/reply/replyFind">回复检索</a></li>
                </ul>
            </li>
            <li class="treeview">><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon fa fa-recycle"></i><span class="app-menu__label">垃圾管理</span><i class="treeview-indicator fa fa-angle-right"></i></a>
                <ul class="treeview-menu">
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/junk/junkPublish">添加垃圾信息</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/junk/junkFind">垃圾信息检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/junk/junkPublishClassify">添加垃圾类别</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_ADMIN')"><a class="treeview-item" href="/junk/junkList">所有垃圾信息</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/junk/junkPublish">添加垃圾信息</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/junk/junkFind">垃圾信息检索</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/junk/junkPublishClassify">添加垃圾类别</a></li>
                    <li sec:authorize = "hasAuthority('ROLE_DBA')"><a class="treeview-item" href="/junk/junkList">所有垃圾信息</a></li>
                </ul>
            </li>
        </ul>
    </aside>

    <main class="app-content">
        <div id="toolbar">
            <button id="btn_delete" class="btn btn-danger"><i class="glyphicon glyphicon-remove"></i>删除</button>
        </div>

        <table
                id="table"
                data-url="/dba/list"
                data-toggle="table"
                data-height="600"
                data-locale="zh-CN"
                data-method="get"
                data-toolbar="#toolbar"

                data-search="true"
                data-show-columns="true"
                data-show-fullscreen="true"
                data-show-export="true"
                data-minimum-count-columns="2"
                data-pagination="true"
                data-sort-name="register_date"
                data-sort-order="desc"
                data-silent-sort="false"
                data-page-number="1"
                data-pagination-pre-text="上一页"
                data-pagination-next-text="下一页"

                data-click-to-select="true"

                data-response-handler="responseHandler"
        >
            <thead>
            <tr>
                <th data-checkbox="true"></th>
                <th data-field="username">用户名</th>
                <th data-field="realname">姓名</th>
                <th data-field="identity">居民身份证号</th>
                <th data-field="phone" data-sortable="true">手机号</th>
                <th data-field="mail">邮箱</th>
                <th data-field="end_date" data-sortable="true">证件截至</th>
                <th data-field="register_date" data-sortable="true">注册日期</th>
                <th data-field="roles">角色</th>
                <th data-title="操作" data-formatter="operateFormatter" data-events="window.operateEvents"></th>
            </tr>
            </thead>
        </table>

        <div id="modalTable" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header  bg-info">
                        <h5 class="modal-title">修改信息</h5>
                        <p id="id" ></p>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true"></span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="form_update" action="" class="form-horizontal form-bordered form-row-strippe" data-toggle="validator" enctype="multipart/form-data">
                            <div class="container">
                                <div class="form-group">
                                    <div class="input-group">
                                        <div style="width: 65px">
                                            <span>用户名</span>
                                        </div>
                                        <div style="width: 350px">
                                            <input type="text" id="username" name="username" class="form-control"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group">
                                        <div style="width: 65px">
                                            <span>姓名</span>
                                        </div>
                                        <div style="width: 350px">
                                            <input type="text" id="realname" name="realname" class="form-control"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group">
                                        <div style="width: 65px">
                                            <span>身份证</span>
                                        </div>
                                        <div style="width: 350px">
                                            <input type="text" id="identity" name="identity" class="form-control"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group">
                                        <div style="width: 65px">
                                            <span>手机</span>
                                        </div>
                                        <div style="width: 350px">
                                            <input type="text" id="phone" name="phone" class="form-control"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group">
                                        <div style="width: 65px">
                                            <span>邮箱</span>
                                        </div>
                                        <div style="width: 350px">
                                            <input type="text" id="mail" name="mail" class="form-control"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group">
                                        <div style="width: 65px">
                                            <span>角色</span>
                                        </div>
                                        <div style="width: 350px">
                                            <select class="form-control" id="roles">
                                                <option value="ROLE_USER">普通用户</option>
                                                <option value="ROLE_ADMIN">管理员</option>
                                                <option value="ROLE_DBA">超级管理员</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <div class="container">
                            <button type="button" class="btn btn-primary" data-dismiss="modal" id="btn_update">修改</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script th:src="@{/jquery/jquery-3.4.1.js}" type="text/javascript"></script>
    <script th:src="@{/popper/popper.min.js}" type="text/javascript"></script>
    <script th:src="@{/bootstrap/bootstrap.min.js}" type="text/javascript"></script>
    <script th:src="@{/bootstrap/tableExport.min.js}" type="text/javascript"></script>
    <script th:src="@{/bootstrap-table/bootstrap-table.min.js}" type="text/javascript"></script>
    <script th:src="@{/bootstrap-table/bootstrap-table-locale-all.min.js}" type="text/javascript"></script>
    <script th:src="@{/bootstrap-table/bootstrap-table-export.min.js}" type="text/javascript"></script>
    <script th:src="@{/sweetalert/sweetalert.min.js}" type="text/javascript"></script>

    <script th:src="@{/js/user/userList.js}" type="text/javascript"></script>
</body>
</html>